grabShareCoupon
i.getDataInMTSI
validate
onreadystatechange

newShare:true
userId:402958856


ewxinfo="FF477AA52A361F43B305FDB2E45E9306%2F8r9C2SVlqtW%2BZeVcyUoVwbn%2FQH7ixdzpr9lPtloOfgfFr1ZHdAfL5Xy7HgiE5U0ffgZ16FDva4kA%2FvkgH6%2BKvA2TYJIzh9UxWJUiNuLg%2Bl6rFTK%2F0u2fama1K%2FIUXJh5Zrb%2Fi6UmyjUiAq9K5v%2FxQezyK6nv130uiPfbZVgoayxk6IL0o1G7QasCB7ERsAltZInwbclKQvcHPYVW5HS3fANz0njfXYFHWwTNMxK98Qde%2BnMDfJSMjX6WaLILol%2BEwQTNTkydlBKg8H2CPgw2g%3D%3D";grap_cookie_phone_ab=13175236180; h_cookie_phone=13175236180;


'{"imgUrl":"http://wx.qlogo.cn/mmopen/vi_32/s9ibvQg3vn0ka7VvHdhZbanx2icrXia9SHc2QIibmTbQ64gWKOibJDVPD3iaeQeLiaHzeqgaL9q95dFFyo57pmjh8VbRw/0","nickname":"devctang","openId":"ow2ouuOICzQcF6d2_Y5ybgS0HBbo"}'

伪装这个，能否骗过？？


'{"imgUrl":"http://wx.qlogo.cn/mmopen/vi_32/s9ibvQg3vn0ka7VvHdhZbanx2icrXia9SHc2QIibmTbQ64gWKOibJDVPD3iaeQeLiaHzeqgaL9q95dFFyo57pmjh8VbRw/0","nickname":"devctang","openId":"ow2ouuOICzQcF6d2_Y5ybgS0HBbo1"}'

ewxinfo="3D087A68170CBAA77574D5F3BB532044%2F8r9C2SVlqtW%2BZeVcyUoVwbn%2FQH7ixdzpr9lPtloOfgfFr1ZHdAfL5Xy7HgiE5U0ffgZ16FDva4kA%2FvkgH6%2BKvA2TYJIzh9UxWJUiNuLg%2Bl6rFTK%2F0u2fama1K%2FIUXJh5Zrb%2Fi6UmyjUiAq9K5v%2FxQezyK6nv130uiPfbZVgoayxk6IL0o1G7QasCB7ERsAltZInwbclKQvcHPYVW5HS3fANz0njfXYFHWwTNMxK98Qde%2BnMDfJSMjX6WaLILol%2BNrsQVJ3mEpWwDH6Tqzg%2FvA%3D%3D";grap_cookie_phone_ab=18588766180; h_cookie_phone=18588766180;

a='{"imgUrl":"http://wx.qlogo.cn/mmopen/vi_32/s9ibvQg3vn0ka7VvHdhZbanx2icrXia9SHc2QIibmTbQ64gWKOibJDVPD3iaeQeLiaHzeqgaL9q95dFFyo57pmjh8VbRw/0","nickname":"devctang","openId":"ow2ouuOICzQcF6d2_Y5ybgS0HBbo2"}'

b=CryptoJS.AES.encrypt(a,r,{iv: i,mode: CryptoJS.mode.CBC}).toString()

this.md5(a)+encodeURIComponent(b)

模仿假的人。就无法知道真实有几个人了？？ 根据客户端的解密结果，进行判断。相加。(混掉User-agent 和模拟cookie就获取数据了）根据https://activity.waimai.meituan.com/coupon/grabShareCoupon （既获取又判断）。
剩余还有多少到达最高点
每人每天5次
每个红包可分享20个人。会不会20个的限制也是假的。

以ewxinfo为唯一key的

在群里也把红包链接抢回来，最好可以直接判断链接还剩下多少机会。
 c(e.data.wxCoupons)


 解密
 56D4B0D5714DF0CDB20C3E3B89B9C9ADyui4%2FJHqG94KOn7YzmDzC9rlJmzf0YrbATktw2Kf1NGjIo5AJU0yd%2Fth6o45UZS%2Faf01BjNw1Xku8tt1jurteXMdPUAt3C3KPjvYJH6KYAKaV%2FEF%2FzPPmamCuhshMzXO4viS0NT8DzSh8Ni%2Fyc9ATT7fUQyonjyfBCpPf5pl42ty0tRFsC%2FBjYxp9w2khACFmTgb8PUEQ0AaeJ8gHGKwcwM%2Bo6siWFUjfOAmbDgld29xfu%2FRCpvBykmFVJp5WMCitmS0sAYeRRBtK4%2BDY0WmPpruU2%2F%2Bva7MuKrzve10UQ%2FKdpxE%2F0%2FHCTKeTN7OAxqA9WJG2nJ%2FxoYIOtMJlzTtpd63GHr3tkrnMBEm7Nk5cfhf1Zoj0rU9wDhGvRUvXOi1
 
 "{"wxCoupons":[{"bestLuck":false,"coupon_price":100,"dateStr":"2017-12-01 13:03:00","head_img_url":"http://wx.qlogo.cn/mmopen/vi_32/s9ibvQg3vn0ka7VvHdhZbanx2icrXia9SHc2QIibmTbQ64gWKOibJDVPD3iaeQeLiaHzeqgaL9q95dFFyo57pmjh8VbRw/0","nick_name":"devctang"}],"userId":22142338,"newShare":true}"


User-agent:
Mozilla/5.0 (Linux; Android 7.1.1; ONEPLUS A5000 Build/NMF26X; wv) AppleWebKit/537.36 (KHTML, like Gecko) Version/4.0 Chrome/53.0.2785.49 Mobile MQQBrowser/6.2 TBS/043613 Safari/537.36 MicroMessenger/6.5.22.1160 NetType/WIFI Language/zh_CN


JS加密库 https://github.com/brix/crypto-js


发送消息 ：http://127.0.0.1:5036/msg/@2c002b3be118d8177a211b94535ed13d/%E5%A4%A7%E5%AE%B6%E5%A5%BD%EF%BC%8C%E6%89%8D%E6%98%AF%E6%95%B4%E5%BE%97%E5%A5%BD

接收消息：
http://127.0.0.1:6036/msg/49/@2c002b3be118d8177a211b94535ed13d/B2EA8E1ABA8B47EA82DB475BA17B517D/3A595577B3B247829BEF51071FCACB33



{"data":"","toast":"你已经抢过这个红包了","code":4002,"msg":"你已经抢过这个红包了"}



